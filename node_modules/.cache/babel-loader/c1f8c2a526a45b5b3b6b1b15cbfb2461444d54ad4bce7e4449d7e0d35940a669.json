{"ast":null,"code":"import{uiActions}from\"./ui-slice\";import{cartActions}from\"./cart-slice\";export const fetchCartData=()=>{return async dispatch=>{const fetchData=async()=>{const response=await fetch(\"https://react-food-415b1-default-rtdb.firebaseio.com/cart.json\");if(!response.ok){return new Error(\"Could not fetch cart data!\");}const data=await response.json();return data;};try{const cartData=await fetchData();dispatch(cartActions.replaceCart({items:cartData.items||[],totalQuantity:cartData.totalQuantity}));}catch(err){dispatch(uiActions.showNotification({status:\"error\",title:\"Error!...\",message:\"Fetching   cart  data failed\"}));}};};export const sendCartData=cart=>{return async dispatch=>{dispatch(uiActions.showNotification({status:\"pending\",title:\"Sending...\",message:\"Sending  cart data! \"}));const sendRequest=async()=>{const response=await fetch(\"https://react-food-415b1-default-rtdb.firebaseio.com/cart.json\",{method:\"PUT\",body:JSON.stringify({items:cart.items,totalQuantity:cart.totalQuantity})});if(!response.ok){throw new Error(\"Sending cart data  failed...\");}};try{await sendRequest();dispatch(uiActions.showNotification({status:\"success\",title:\"Success!...\",message:\"Sending  cart  data successfully\"}));}catch(error){dispatch(uiActions.showNotification({status:\"error\",title:\"Error!...\",message:\"Sending  cart  data failed\"}));}};};","map":{"version":3,"names":["uiActions","cartActions","fetchCartData","dispatch","fetchData","response","fetch","ok","Error","data","json","cartData","replaceCart","items","totalQuantity","err","showNotification","status","title","message","sendCartData","cart","sendRequest","method","body","JSON","stringify","error"],"sources":["C:/Users/Vasfi Ocak/Desktop/Veysi/development/food-redux-app/src/store/cart-actions.js"],"sourcesContent":["import { uiActions } from \"./ui-slice\";\r\nimport { cartActions } from \"./cart-slice\";\r\n\r\nexport const fetchCartData = () => {\r\n\treturn async (dispatch) => {\r\n\t\tconst fetchData = async () => {\r\n\t\t\tconst response = await fetch(\r\n\t\t\t\t\"https://react-food-415b1-default-rtdb.firebaseio.com/cart.json\"\r\n\t\t\t);\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\treturn new Error(\"Could not fetch cart data!\");\r\n\t\t\t}\r\n\t\t\tconst data = await response.json();\r\n\t\t\treturn data;\r\n\t\t};\r\n\t\ttry {\r\n\t\t\tconst cartData = await fetchData();\r\n\t\t\tdispatch(\r\n\t\t\t\tcartActions.replaceCart({\r\n\t\t\t\t\titems: cartData.items || [],\r\n\t\t\t\t\ttotalQuantity: cartData.totalQuantity,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} catch (err) {\r\n\t\t\tdispatch(\r\n\t\t\t\tuiActions.showNotification({\r\n\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t\ttitle: \"Error!...\",\r\n\t\t\t\t\tmessage: \"Fetching   cart  data failed\",\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const sendCartData = (cart) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(\r\n\t\t\tuiActions.showNotification({\r\n\t\t\t\tstatus: \"pending\",\r\n\t\t\t\ttitle: \"Sending...\",\r\n\t\t\t\tmessage: \"Sending  cart data! \",\r\n\t\t\t})\r\n\t\t);\r\n\t\tconst sendRequest = async () => {\r\n\t\t\tconst response = await fetch(\r\n\t\t\t\t\"https://react-food-415b1-default-rtdb.firebaseio.com/cart.json\",\r\n\t\t\t\t{\r\n\t\t\t\t\tmethod: \"PUT\",\r\n\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\titems: cart.items,\r\n\t\t\t\t\t\ttotalQuantity: cart.totalQuantity,\r\n\t\t\t\t\t}),\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow new Error(\"Sending cart data  failed...\");\r\n\t\t\t}\r\n\t\t};\r\n\t\ttry {\r\n\t\t\tawait sendRequest();\r\n\t\t\tdispatch(\r\n\t\t\t\tuiActions.showNotification({\r\n\t\t\t\t\tstatus: \"success\",\r\n\t\t\t\t\ttitle: \"Success!...\",\r\n\t\t\t\t\tmessage: \"Sending  cart  data successfully\",\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} catch (error) {\r\n\t\t\tdispatch(\r\n\t\t\t\tuiActions.showNotification({\r\n\t\t\t\t\tstatus: \"error\",\r\n\t\t\t\t\ttitle: \"Error!...\",\r\n\t\t\t\t\tmessage: \"Sending  cart  data failed\",\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n};\r\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,YAAY,CACtC,OAASC,WAAW,KAAQ,cAAc,CAE1C,MAAO,MAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAClC,MAAO,MAAO,CAAAC,QAAQ,EAAK,CAC1B,KAAM,CAAAC,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAC3B,gEACD,CAAC,CACD,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CACjB,MAAO,IAAI,CAAAC,KAAK,CAAC,4BAA4B,CAAC,CAC/C,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClC,MAAO,CAAAD,IAAI,CACZ,CAAC,CACD,GAAI,CACH,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAP,SAAS,CAAC,CAAC,CAClCD,QAAQ,CACPF,WAAW,CAACW,WAAW,CAAC,CACvBC,KAAK,CAAEF,QAAQ,CAACE,KAAK,EAAI,EAAE,CAC3BC,aAAa,CAAEH,QAAQ,CAACG,aACzB,CAAC,CACF,CAAC,CACF,CAAE,MAAOC,GAAG,CAAE,CACbZ,QAAQ,CACPH,SAAS,CAACgB,gBAAgB,CAAC,CAC1BC,MAAM,CAAE,OAAO,CACfC,KAAK,CAAE,WAAW,CAClBC,OAAO,CAAE,8BACV,CAAC,CACF,CAAC,CACF,CACD,CAAC,CACF,CAAC,CAED,MAAO,MAAM,CAAAC,YAAY,CAAIC,IAAI,EAAK,CACrC,MAAO,MAAO,CAAAlB,QAAQ,EAAK,CAC1BA,QAAQ,CACPH,SAAS,CAACgB,gBAAgB,CAAC,CAC1BC,MAAM,CAAE,SAAS,CACjBC,KAAK,CAAE,YAAY,CACnBC,OAAO,CAAE,sBACV,CAAC,CACF,CAAC,CACD,KAAM,CAAAG,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAjB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAC3B,gEAAgE,CAChE,CACCiB,MAAM,CAAE,KAAK,CACbC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACpBb,KAAK,CAAEQ,IAAI,CAACR,KAAK,CACjBC,aAAa,CAAEO,IAAI,CAACP,aACrB,CAAC,CACF,CACD,CAAC,CACD,GAAI,CAACT,QAAQ,CAACE,EAAE,CAAE,CACjB,KAAM,IAAI,CAAAC,KAAK,CAAC,8BAA8B,CAAC,CAChD,CACD,CAAC,CACD,GAAI,CACH,KAAM,CAAAc,WAAW,CAAC,CAAC,CACnBnB,QAAQ,CACPH,SAAS,CAACgB,gBAAgB,CAAC,CAC1BC,MAAM,CAAE,SAAS,CACjBC,KAAK,CAAE,aAAa,CACpBC,OAAO,CAAE,kCACV,CAAC,CACF,CAAC,CACF,CAAE,MAAOQ,KAAK,CAAE,CACfxB,QAAQ,CACPH,SAAS,CAACgB,gBAAgB,CAAC,CAC1BC,MAAM,CAAE,OAAO,CACfC,KAAK,CAAE,WAAW,CAClBC,OAAO,CAAE,4BACV,CAAC,CACF,CAAC,CACF,CACD,CAAC,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}